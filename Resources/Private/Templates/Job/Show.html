<html xmlns:f="http://typo3.org/ns/TYPO3/CMS/Fluid/ViewHelpers" xmlns:pxa="http://typo3.org/ns/Pixelant/PxaIntelliplanJobs/ViewHelpers" data-namespace-typo3-fluid="true">
<f:layout name="Default" />

<f:section name="main">

    <f:flashMessages />

    <div class="container">
        <div class="row">
            <div class="col-md-3">
                <div class="light-gray-background">
                    <div class="side-content">
                        <h3><f:translate key="fe.quick_facts" /></h3>
                        <p><strong><f:translate key="fe.job" /></strong> <br>{job.service}</p>
                        <f:if condition="{job.state}">
                            <p><strong><f:translate key="fe.region" /></strong> <br>{job.state}</p>
                        </f:if>
                        <f:if condition="{job.municipality}">
                            <p><strong><f:translate key="fe.city" /></strong> <br>{job.municipality}</p>
                        </f:if>
                        <f:if condition="{job.employmentExtent}">
                            <p><strong><f:translate key="fe.extent" /></strong> <br>{job.employmentExtent}</p>
                        </f:if>
                        <f:if condition="{job.employmentType}">
                            <p><strong><f:translate key="fe.duration" /></strong> <br>{job.employmentType}</p>
                        </f:if>
                        <f:if condition="{job.start}">
                            <p><strong><f:translate key="fe.start" /></strong> <br>{job.start}</p>
                        </f:if>
                        <f:if condition="{job.pubDateTo}">
                            <p><strong><f:translate key="fe.apply_before" /></strong> <br><f:format.date date="{job.pubDateTo}" format="{settings.dateFormat}"/></p>
                        </f:if>
                    </div>
                </div>

                <f:if condition="{job.contentElementsUids}">
                    <f:cObject typoscriptObjectPath="lib.pxaIntelliplanJobsContentElementsRenderer" data="{uids: job.contentElementsUids}" />
                </f:if>

                <f:if condition="{settings.showShareForm}">
                    <div class="light-gray-background">
                        <div class="side-form">
                            <h3><f:translate key="fe.tell_friend" /></h3>

                            <f:form controller="JobAjax" action="share" pluginName="Pi2" pageType="{settings.sharePageType}" objectName="shareJob" class="pxa-tell-friend">
                                <div class="form-group" data-field="receiverName">
                                    <f:form.textfield class="form-control" placeholder="{f:translate(key: 'fe.friend_name')}" property="receiverName"/>
                                </div>
                                <div class="form-group" data-field="receiverEmail">
                                    <f:form.textfield class="form-control" placeholder="{f:translate(key: 'fe.friend_email')}" property="receiverEmail"/>
                                </div>
                                <div class="form-group" data-field="senderName">
                                    <f:form.textfield class="form-control" placeholder="{f:translate(key: 'fe.your_name')}" property="senderName"/>
                                </div>

                                <button type="submit" class="btn btn-default"><f:translate key="fe.submit" /></button>

                                <f:form.hidden property="shareUrl" value="{shareUrl}" />
                                <f:form.hidden name="job" value="{job}" />
                            </f:form>
                            <!-- '_ready' -->
                            <div class="ajax-loader _ready">
                                <f:render partial="AjaxLoader" />
                            </div>
                        </div>
                    </div>
                </f:if>
            </div>
            <div class="col-md-9">
                <f:format.html>{job.description}</f:format.html>
            </div>
        </div>
    </div>

    <div class="page-navigation visible-md visible-lg">
        <div class="container">
            <f:cObject typoscriptObjectPath="lib.pxaIntelliplanJobsBreadCrumbs" />
        </div>
    </div>

    <div class="light-gray-background">
        <div class="container">
            <div class="row">
                <div class="col-md-8 center-block">
                    <div class="panel-box">
                        <f:form enctype="multipart/form-data" name="apply-job" action="applyJob" controller="JobAjax" pluginName="Pi2" pageType="{settings.sharePageType}">
                            <f:form.hidden name="job" value="{job}" />
                            <f:form.hidden name="requireCV" value="1" />

                            <div class="panel-box__body">
                                <f:render section="applyJobFields" />

                                <f:render section="uploadFile" arguments="{label: 'add_cv', name: 'cv'}"/>
                                <f:render section="uploadFile" arguments="{label: 'add_letter', name: 'letter'}"/>

                                <div class="form-additions">
                                    <f:render section="agreeOnTerms" />
                                </div>
                            </div>

                            <f:render section="submitButton" />
                        </f:form>
                        <div class="ajax-loader _ready">
                            <f:render partial="AjaxLoader" />
                        </div>
                    </div>


                    <div class="panel-box">
                        <div class="panel-header">
                            <h2><f:translate key="fe.no_cv" /></h2>
                        </div>
                        <f:form enctype="multipart/form-data" class="js__panel-collapsible" name="apply-job" action="applyJob" controller="JobAjax" pluginName="Pi2" pageType="{settings.sharePageType}">
                            <f:form.hidden name="job" value="{job}" />

                            <div class="panel-box__body">
                                <f:render section="applyJobFields" />

                                <div class="form-additions">
                                    <p><strong>Sed ut perspiciatis</strong></p>
                                    <div class="radio-item">
                                        <label>
                                            <input type="radio" name="radio">
                                            <span>Yes</span>
                                        </label>
                                    </div>
                                    <div class="radio-item">
                                        <label>
                                            <input type="radio" name="radio">
                                            <span>No</span>
                                        </label>
                                    </div>
                                </div>
                                <div class="form-additions">
                                    <p><strong>Sed ut perspiciatis</strong></p>
                                    <div class="radio-item">
                                        <label>
                                            <input type="radio" name="radio1">
                                            <span>Yes</span>
                                        </label>
                                    </div>
                                    <div class="radio-item">
                                        <label>
                                            <input type="radio" name="radio1">
                                            <span>No</span>
                                        </label>
                                    </div>
                                </div>
                                <div class="form-additions">
                                    <p><strong>Sed ut perspiciatis</strong></p>
                                    <div class="radio-item">
                                        <label>
                                            <input type="radio" name="radio2">
                                            <span>Yes</span>
                                        </label>
                                    </div>
                                    <div class="radio-item">
                                        <label>
                                            <input type="radio" name="radio2">
                                            <span>No</span>
                                        </label>
                                    </div>
                                </div>

                                <div class="form-additions">
                                    <f:render section="agreeOnTerms" />
                                </div>
                            </div>

                            <f:render section="submitButton" />
                        </f:form>
                        <div class="ajax-loader _ready">
                            <f:render partial="AjaxLoader" />
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="page-navigation visible-md visible-lg">
        <div class="container">
            <f:cObject typoscriptObjectPath="lib.pxaIntelliplanJobsBreadCrumbs" />
        </div>
    </div>
</f:section>

<f:section name="uploadFile">
    <div class="form-additions">
        <div class="row">
            <div class="col-sm-6" data-field="{name}">
                <p class="additions-label">
                    <strong><f:translate key="fe.{label}"/></strong>
                </p>
            </div>
            <div class="col-sm-6 _actions">
                <div class="file-uploader">
                    <label class="btn btn-upload">
                        <f:form.upload class="js__file-upload" name="applyJobFiles[{name}]"/>
                        <input type="file" class="js__file-upload">
                        <span>
                            <span class="action-name">
                                <i class="icons icon-paperclip"></i>
                                <f:translate key="fe.attach_document" />
                            </span>
                            <span class="file-uploader__name"></span>
                        </span>
                    </label>
                    <i class="icons icon-clear file-uploader__clear js__file-upload__clear"></i>
                </div>
            </div>
        </div>
    </div>
</f:section>

<f:section name="agreeOnTerms">
    <div class="form-additions__agreement" data-field="agreeOnTerms">
        <f:form.checkbox value="1" name="applyJob[agreeOnTerms]" class="acceptTerms"/>
        <p>
            <f:translate key="fe.accept_terms_text" arguments="{0: '{f:render(section: \'agreeOnTermsLink\')}'}"/>
        </p>
    </div>
</f:section>

<f:section name="agreeOnTermsLink"><f:spaceless>
    <f:link.typolink parameter="{settings.applyJob.termsLink}" target="_blank">
        <span><f:translate key="fe.accept_term_link" /></span>
    </f:link.typolink>
</f:spaceless></f:section>


<f:section name="applyJobFields">
    <div class="row">
        <div class="col-sm-6">
            <f:for each="{settings.applyJob.fields.firstColumns -> pxa:explode()}" as="field">
                <div class="form-item" data-field="{field}">
                    <f:form.textfield class="form-control" placeholder="{f:translate(key: 'placeholder.{field}')}" name="applyJob[{field}]"/>
                </div>
            </f:for>
        </div>
        <div class="col-sm-6">
            <f:for each="{settings.applyJob.fields.secondColumn -> pxa:explode()}" as="field">
                <div class="form-item" data-field="{field}">
                    <f:form.textfield class="form-control" placeholder="{f:translate(key: 'placeholder.{field}')}" name="applyJob[{field}]"/>
                </div>
            </f:for>
        </div>
    </div>
</f:section>

<f:section name="submitButton">
    <div class="panel-box__footer">
        <div class="form-actions text-center">
            <button type="submit" class="btn btn-default" disabled><f:translate key="fe.sumit_2" /></button>
        </div>
    </div>
</f:section>
</html>